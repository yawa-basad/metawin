import{_ as l}from"./InputCode.444dd6a5.js";import{f as h,D as i,q as o,p,_ as u,o as f,g as m,w as g,d as t,a as _,N as b,t as n,O as y,y as L,x as w}from"./entry.4421f2c3.js";const a="Send another code",C=h({name:"ModalVerificationCode",props:["attribute"],setup(){return{authStore:i()}},data(){return{code:"",resendBtnLabel:a,isLoading:!1,errorMessage:"",codeLength:6,codeInputDisabled:!1}},methods:{...o(i,["verifyAttribute","verifyAttributeCode"]),...o(p,["syncUserProfile"]),codeUpdate(e){this.code=e},async resendCode(){this.isLoading=!0,this.resendBtnLabel="Sending...",this.resetInput(),this.errorMessage="";try{await this.verifyAttribute(this.attribute),this.resendBtnLabel=a}catch(e){console.log("error resending code: ",e)}finally{this.code="",this.isLoading=!1}},async confirm(){this.isLoading=!0;try{await this.verifyAttributeCode(this.attribute,this.code),await this.syncUserProfile(),this.$gtmCustomEvent({event:`verify_${this.attribute}`,action:"success"}),this.$emit("close")}catch(e){this.errorMessage=e.message,this.resetInput()}finally{this.isLoading=!1}},resetInput(){var e;this.code="",(e=this.$refs.CodeInput)==null||e.init()}},watch:{async code(e){e.length===this.codeLength&&await this.confirm()}}}),v={class:"px-4 md:px-7 pt-2 w-full text-center"},x=t("h1",{class:"text-2xl tracking-wide font-semibold mb-2 text-center"},"Verification Code",-1),k=t("p",{class:"text-slate-200 mt-4 leading-tight"},"Please check your email for the verification code",-1),B={class:"max-w-[370px] w-full mx-auto mt-3 inline-block"},S=["disabled"];function $(e,s,A,M,U,I){const r=l,d=w;return f(),m(d,null,{default:g(()=>[t("div",v,[x,k,t("div",B,[_(r,{class:"mt-3",ref:"CodeInput",length:e.codeLength,disabled:e.isLoading,onUpdate:e.codeUpdate},null,8,["length","disabled","onUpdate"])]),b(t("p",{class:"w-full inline-block text-red text-sm mt-4"},n(e.errorMessage),513),[[y,e.errorMessage!==""]]),t("button",{onClick:s[0]||(s[0]=(...c)=>e.resendCode&&e.resendCode(...c)),type:"submit",class:L(["text-sm tracking-widest mt-4 p-2 inline-block transition-opacity hover:opacity-90",{"opacity-40 hover:opacity-40":e.isLoading}]),disabled:e.isLoading},n(e.resendBtnLabel),11,S)])]),_:1})}const N=u(C,[["render",$]]);export{N as _};
//# sourceMappingURL=VerificationCode.c96a2f44.js.map
