import{_ as u,f as c,o,c as i,F as f,s as h,N as p,Q as m,z as C,P as y,d as r,y as b,a7 as v}from"./entry.4421f2c3.js";const g="code-input",$="^\\d{1}$",_=c({name:"InputCode",props:{length:{type:Number,default:6},disabled:{type:Boolean}},data(){return{baseRefName:g,focusedCellIdx:0,cells:[]}},computed:{codeComputed(){return this.cells.reduce((e,t)=>e+t.value,"")}},mounted(){this.init()},methods:{init(){console.log("init"),this.cells=Array.from({length:this.length},(e,t)=>({value:"",key:t})),this.$nextTick(this.focusCellByIndex)},async onKeyAction(e,t){if(t.inputType!=="deleteContentBackward"){if(!this.isTheCellValid(t.data)){this.cells[e].value="";return}this.cells[e].value=t.data,this.$emit("update",this.codeComputed),this.focusNextCell()}},isTheCellValid(e){return e?e.match($):!1},focusPreviousCell(){this.focusedCellIdx&&this.focusCellByIndex(this.focusedCellIdx-1)},focusNextCell(){this.focusedCellIdx!==this.length-1&&this.focusCellByIndex(this.focusedCellIdx+1)},focusCellByIndex(e=0){const t=`${this.baseRefName}${e}`,l=this.$refs[t][0];l.focus(),l.select(),this.focusedCellIdx=e},onPaste(e){e.preventDefault();const t=e.clipboardData.getData("text").trim();t.length!==this.length||!/^[0-9]+$/.test(t)||(t.split("").forEach((l,d)=>{this.cells[d].value=l}),this.focusCellByIndex(this.length-1),this.$emit("update",this.codeComputed))}}}),I={class:"flex justify-between w-full relative"},x={class:"w-1/5 px-1"},B=["onUpdate:modelValue","disabled","onFocus","onInput"],w=r("img",{class:"inline-block spinner-border animate-spin-slowing",src:v,alt:"",width:"30",height:"30"},null,-1),N=[w];function k(e,t,l,d,E,P){return o(),i("div",I,[(o(!0),i(f,null,h(e.cells,(n,a)=>(o(),i("div",x,[p((o(),i("input",C({class:"w-full mt-0 relative bg-slate-600 border-slate-600 rounded-lg py-3 px-4 border-2 outline-none focus:border-slate-200 focus:ring-0 autofill:bg-slate-600 transition-all text-center disabled:opacity-40",autocomplete:"off",key:n.key,ref_for:!0,ref:`${e.baseRefName}${a}`,"onUpdate:modelValue":s=>n.value=s},e.$attrs,{type:"tel",size:"1",placeholder:"0",disabled:e.disabled,onFocus:s=>e.focusedCellIdx=a,onInput:s=>e.onKeyAction(a,s),onKeyup:t[0]||(t[0]=y(s=>e.focusPreviousCell(),["delete"])),onPaste:t[1]||(t[1]=s=>e.onPaste(s))}),null,16,B)),[[m,n.value]])]))),256)),r("div",{class:b([{"opacity-100 visible":e.disabled,"opacity-0 invisible":!e.disabled},"transition-all absolute flex justify-center align-middle left-0 top-0 w-full h-full"]),role:"status"},N,2)])}const A=u(_,[["render",k]]);export{A as _};
//# sourceMappingURL=InputCode.444dd6a5.js.map
