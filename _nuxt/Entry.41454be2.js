import{f as C,k as T,u as D,_ as z,o as s,c as i,d as n,y as r,l as L,t as u,a as g,w,F as I,s as N,h as o,g as x,b as P,T as _,ak as S}from"./entry.4421f2c3.js";import{_ as U}from"./UserAvatar.35381a6a.js";import{_ as B}from"./nuxt-link.8afd11c8.js";import{_ as M}from"./CurrencyIconImage.f4cd812b.js";const E=C({name:"LeaderboardCountdown",props:["endTime","isClosed","forceCountdownDisplay"],data(){return{barItemDisplay:null,expiresInText:null,urgency:0,ended:!1}},computed:{...T(D,["secondsTicker"])},mounted(){this.setExpiresIn()},methods:{setExpiresIn(){const e=this.$dayjs(),l=this.$dayjs(this.endTime),a=l.diff(e,"s");let d=new Date(null);d.setSeconds(a);let p;return a<86400?p=d.toISOString().substr(11,8):p=`<span class="tabular-nums">${l.fromNow(!0)}</span>`,a>1800&&(this.urgency=1),a<=1800&&(this.urgency=2),a<=0&&(this.ended||(this.ended=!0,this.$emit("ended"))),this.isClosed||a<0?this.expiresInText="Closed":this.expiresInText=`<span class="tabular-nums">${p}</span>`}},watch:{secondsTicker(){this.setExpiresIn()}}}),V=n("span",{class:"icon-ico-timer font-bold relative -left-0.5 top-[1px] text-xs"},null,-1),j=["innerHTML"];function H(e,l,a,d,p,c){return s(),i("div",{class:r(["uppercase tracking-wider text-center text-[10px] rounded-full px-1.5 py-0 leading-none flex items-center",{"bg-yellow-300 text-slate-900":e.urgency===1,"bg-red-600":e.urgency===2}])},[V,n("span",{class:"whitespace-nowrap font-bold",innerHTML:e.expiresInText},null,8,j)],2)}const oe=z(E,[["render",H]]),A=C({name:"LeaderboardEntry",props:["item","showProgress","displayType","decimalPlaces","metadata","placement","size","showPrize","roundingDecimals"],methods:{formatPoints(e){return this.decimalPlaces>0&&(e=e/Math.pow(10,this.decimalPlaces),this.roundingDecimals>0&&e>1/Math.pow(10,this.roundingDecimals)&&(e=this.$truncateNumber(e,this.roundingDecimals))),this.displayType==="Multiplier"&&(e=`x${e}`),e},formatPrizeValue(e){var f,y;if(!((f=this.metadata)!=null&&f.convertPrizeAmount)||!this.rates)return e.amount;const l=e.currencyCode||"ETH",a=((y=this.rates[l])==null?void 0:y.USD)||null;if(!a)return e.amount;const d=this.$toBigNumber(a),c=this.$toBigNumber(e.amount).multipliedBy(d).decimalPlaces(2).toNumber();return c<100?`${this.$formatMoney(c,"USD",!0)}`:`$${this.$truncateNumber(c,0,!0)}`}},computed:{...T(L,["rates"]),barWidth(){if(!this.showProgress||!this.item)return 0;let e=(this.item.runningPoints/this.item.points*100).toFixed(2);return e=Math.min(e,100),e},pointsDisplay(){return this.formatPoints(this.item.points)},runningPointsDisplay(){return this.formatPoints(this.item.runningPoints)},pointsLabel(){var a,d;if(!((d=(a=this.metadata)==null?void 0:a.pointLabels)!=null&&d.length))return null;const e=Math.min(this.item.points-1,this.metadata.pointLabels.length-1),l=this.metadata.pointLabels[e];return l||null}}}),F={class:"w-1/12 flex items-center relative z-10"},R={class:"w-4/12 relative z-10"},W={key:0,class:"w-5/12 relative z-10"},O={class:"flex items-center border-t border-slate-500 pt-1 mt-1 first-of-type:border-none first-of-type:pt-0 first-of-type:mt-0"},q={key:0,class:"mr-1 rounded-[3px] relative overflow-hidden w-4 h-4 sm:w-5 sm:h-5 flex-none grow-0 shrink-0"},G=["src"],J={class:"grow overflow-hidden"},K={class:"font-bold whitespace-nowrap text-ellipsis overflow-hidden leading-none"},Q={key:0,class:"flex items-center"},X={class:"font-bold leading-none"},Y={key:1,class:"uppercase font-bold text-[10px] text-gold whitespace-nowrap leading-none w-[90px]"},Z={key:1,class:"uppercase font-bold text-[10px] text-gold whitespace-nowrap leading-none flex justify-between"},ee=n("div",null,null,-1),te={class:"w-[90px]"};function se(e,l,a,d,p,c){var v,$;const f=U,y=B,b=M;return s(),i("article",{class:r(["border-b border-slate-500",{"bg-blue/20":e.item.isPlayer}])},[n("div",{class:r(["relative w-full flex items-center flex-wrap px-3",e.size==="lg"?"py-3 sm:py-4":"py-0.5"])},[n("div",F,[n("span",{class:r(["font-bold leading-none text-xs sm:text-sm",{"gradient-gold ":e.item.prizes.length}])},u(e.item.points?e.item.rank:"â€¢"),3)]),n("div",R,[g(y,{to:`/mw/${(v=e.item.displayName)==null?void 0:v.toLowerCase()}`,class:"flex items-center mr-1 group"},{default:w(()=>[g(f,{url:e.item.avatarUrl,country:e.item.currentCountry??e.item.country,size:"md",class:r(["mr-1 shrink-0 flex items-center rounded-full border",{"border-cyan":e.item.isPlayer,"border-transparent":!e.item.isPlayer}]),imgClass:"w-4 h-4 shrink-0"},null,8,["url","country","class"]),n("h3",{class:r(["whitespace-nowrap text-ellipsis overflow-hidden group-hover:text-gray-300 transition-colors text-[10px] sm:text-xs",{"lg:text-sm lg:ml-1":e.placement==="page","!text-xs sm:!text-sm":e.size==="lg"}])},u(e.item.displayName),3)]),_:1},8,["to"])]),e.showPrize?(s(),i("div",W,[e.item.prizes.length&&e.item.points?(s(!0),i(I,{key:0},N(e.item.prizes,t=>{var m;return s(),i("div",O,[t.type==="Tangible"&&t.imageUrl&&t.imageUrl!==""?(s(),i("figure",q,[n("img",{class:"block relative z-10 w-full object-cover rounded-[3px]",src:e.$imgSrcResize(t.imageUrl,50,50),width:"50",height:"50",alt:"",loading:"lazy",decoding:"async"},null,8,G)])):o("",!0),n("div",J,[n("div",{class:r(["flex flex-col text-[10px] sm:text-xs",{"lg:text-sm":e.placement==="page","!text-xs sm:!text-sm":e.size==="lg"}])},[n("h2",K,u(t.name),1),t.type!=="Tangible"?(s(),i("h2",Q,[(m=e.metadata)!=null&&m.convertPrizeAmount?o("",!0):(s(),x(b,{key:0,currency:t.currencyCode?t.currencyCode:"ETH",class:"h-3 mr-0.5 relative"},null,8,["currency"])),n("span",X,u(e.formatPrizeValue(t)),1)])):o("",!0)],2)]),e.pointsLabel?(s(),i("div",Y,u(e.pointsLabel),1)):o("",!0)])}),256)):e.pointsLabel?(s(),i("div",Z,[ee,n("div",te,u(e.pointsLabel),1)])):o("",!0)])):o("",!0),n("div",{class:r(["w-2/12 flex items-center justify-end font-bold text-[10px] sm:text-xs relative z-10",{"!text-xs sm:!text-sm":e.size==="lg","flex-1":!e.showPrize}])},[g(_,{name:"points",mode:"out-in"},{default:w(()=>{var t,m,h,k;return[!((t=e.metadata)!=null&&t.hideRunningPoints)&&e.item.runningPoints>0&&e.item.runningPoints!==e.item.points?(s(),i("span",{class:r(["text-slate-100 text-[9px] sm:text-xs mr-2 whitespace-nowrap",{"lg:text-sm":e.placement==="page"}]),key:e.item.runningPoints},[(m=e.metadata)!=null&&m.displayCurrency?(s(),x(b,{class:"inline-block h-[10px] w-[10px] relative -top-[1px] grayscale",currency:(h=e.metadata)==null?void 0:h.displayCurrency,key:(k=e.metadata)==null?void 0:k.displayCurrency},null,8,["currency"])):o("",!0),P(" "+u(e.runningPointsDisplay),1)],2)):o("",!0)]}),_:1}),g(_,{name:"points",mode:"out-in"},{default:w(()=>{var t,m,h;return[(s(),i("span",{class:r(["text-right self-end whitespace-nowrap",{"lg:text-sm lg:min-w-[100px]":e.placement==="page"}]),key:e.item.points},[(t=e.metadata)!=null&&t.displayCurrency?(s(),x(b,{class:"inline-block h-[10px] w-[10px] relative -top-[1px] ml-2",currency:(m=e.metadata)==null?void 0:m.displayCurrency,key:(h=e.metadata)==null?void 0:h.displayCurrency},null,8,["currency"])):o("",!0),P(" "+u(e.pointsDisplay),1)],2))]}),_:1})],2),($=e.metadata)!=null&&$.hideRunningPoints?o("",!0):(s(),i("div",{key:1,class:r(["w-full h-[1px] absolute z-10 left-0 -bottom-[1px] transition-all duration-1000 after:absolute after:right-0 after:w-[5px] after:h-[5px] after:rounded-full after:-top-[2px] after:border after:border-black/40",[e.barWidth===0?"opacity-0":"",e.item.isPlayer?"bg-cyan-500 after:bg-cyan-500":"bg-gray-400 after:bg-gray-400"]]),style:S(`width: ${e.barWidth}%;`)},null,6))],2)],2)}const le=z(A,[["render",se]]);export{oe as _,le as a};
//# sourceMappingURL=Entry.41454be2.js.map
