import{_ as V}from"./MetaWin-icon-white-cyan.785a481f.js";import{m as z,w as G}from"./walletconnect.02b9a9b3.js";import{_ as $,f as _,o as s,c as i,d as a,t as o,b as h,y as I,h as l,a as r,w as u,F as W,s as q,g as y,z as O,A as j,k as c,l as S,B as g,r as X,T as A,v as x,C as Y,D as R,m as T,u as L,i as C,p as P,q as D,E as Z,G as K,x as J}from"./entry.4421f2c3.js";import{F as E,a as F,E as U,c as Q,b as ee,_ as te}from"./object.19c1d3e0.js";import{_ as se}from"./ButtonPreset.d045a28d.js";import{_ as ie}from"./ButtonConnect.89e7af98.js";import{_ as ae}from"./ButtonLink.b1e77cf0.js";import"./CurrencyIconImage.f4cd812b.js";import"./nuxt-link.8afd11c8.js";const ne=""+new URL("coinbase.359a8c96.svg",import.meta.url).href,oe=_({name:"ModalWalletToggleButton",props:["owner","walletName","balance","currency","displayIndex","toggleBlocked"],computed:{nameAppendix(){return this.displayIndex===0?"From":"To"},balanceDisplay(){return this.balance},walletNameLowcase(){var e;return((e=this.walletName)==null?void 0:e.toLowerCase())||""}}}),le=["disabled"],re={class:"w-12 h-12 bg-blue-800 rounded-full flex justify-center items-center overflow-hidden shrink-0 mr-3"},ue={key:0,src:V,alt:"MetaWin icon",width:"38",height:"38"},de={key:1,src:z,alt:"MetaMask icon",width:"30",height:"30"},me={key:2,src:ne,alt:"Coinbase icon",width:"30",height:"30"},ce={key:3,src:G,alt:"WalletConnect icon",width:"30",height:"30"},he={class:"text-left overflow-hidden"},pe={class:"text-cyan"},fe={class:"text-green"};function ge(e,t,n,m,w,k){return s(),i("button",{class:I(["p-2 w-full bg-slate-600 rounded-xl flex items-center mb-2",{"cursor-default":e.toggleBlocked}]),disabled:e.toggleBlocked},[a("figure",re,[e.walletNameLowcase==="metawin"?(s(),i("img",ue)):e.walletNameLowcase==="metamask"?(s(),i("img",de)):e.walletNameLowcase==="coinbase"?(s(),i("img",me)):(s(),i("img",ce))]),a("div",he,[(s(),i("h3",{class:"font-bold text-xl whitespace-nowrap leading-none animate-fade-in",key:e.nameAppendix},[a("span",pe,o(e.nameAppendix),1),h(" "+o(this.walletName),1)])),(s(),i("h4",{class:"text-sm text-slate-100 animate-fade-in",key:e.balanceDisplay},[h(" Balance "),a("span",fe,o(e.balanceDisplay)+" "+o(e.currency),1)]))])],10,le)}const we=$(oe,[["render",ge]]),be=_({name:"ModalWalletToggle",props:["buttons","toggleBlocked","walletModalMode","maxLimit"],data(){return{isToggling:!1}},computed:{arrowsRotated(){return this.buttons[0].owner==="client"}},methods:{toggle(){this.toggleBlocked||this.$emit("toggle")}}}),ye=a("span",{class:"icon-ico-sort-arrows text-2xl"},null,-1),$e=[ye],_e={key:0,class:"text-slate-100 text-xs lg:text-sm text-center mt-5"},ke=a("span",{class:"text-pink-400 uppercase tracking-wider"},"Zero friction guarantee",-1),ve=a("br",null,null,-1),Me={key:1,class:"text-slate-100 text-xs lg:text-sm text-center mt-5"},Se=a("span",{class:"text-pink-400 uppercase tracking-wider"},"WINNING IN WEB3!",-1),Be=a("br",null,null,-1),Ae=a("br",null,null,-1);function Te(e,t,n,m,w,k){const p=we;return s(),i("div",null,[a("div",{onClick:t[0]||(t[0]=(...d)=>e.toggle&&e.toggle(...d)),class:"relative"},[e.toggleBlocked?l("",!0):(s(),i("button",{key:0,class:I(["absolute z-20 w-[28px] h-[28px] rounded-full bg-blue lg:hover:bg-blue-400 right-4 flex items-center justify-center top-1/2 -mt-4 transition-all duration-300 animate-slide-down-fade-in01s",{"rotate-180":e.arrowsRotated}])},$e,2)),r(j,{name:"list-position"},{default:u(()=>[(s(!0),i(W,null,q(e.buttons,(d,f)=>(s(),y(p,O(d,{key:d.owner,displayIndex:f,toggleBlocked:e.toggleBlocked}),null,16,["displayIndex","toggleBlocked"]))),128))]),_:1})]),e.walletModalMode==="withdraw"?(s(),i("p",_e,[ke,e.maxLimit?(s(),i(W,{key:0},[ve,h("Swaps up to "+o(e.maxLimit)+" ETH per 24h period are instant. ",1)],64)):l("",!0)])):(s(),i("p",Me,[Se,Be,h("Swaps are instant."),Ae,h("Youâ€™ll have your funds in a few seconds. ")]))])}const Ce=$(be,[["render",Te]]),We=_({name:"ModalWalletForminterface",components:{Form:E,Field:F,ErrorMessage:U},props:["currency","presets","minSwap","maxSwap","showExchangeRate","walletModalMode","isProcessingTx","isComplete","isLoadingData","limitRemaining","outcome","isSubmitBtnBlocked","clientWalletBalance","platformBalance","maxLimit"],data(){return{swapAmount:null,meta:null,showCompleteBtn:!1}},computed:{...c(S,["exchangeRateEthUsd"]),validationSchema(){return Q().shape({swapAmount:ee().positive().min(this.minSwap,`Minimum swap is ${this.minSwap} ETH`).max(this.maxSwapInMode,`${this.maxSwapErrorMsg}`).required("Please enter a numeric value").typeError("Please enter a numeric value").label("Swap amount")})},maxSwapInMode(){return this.maxSwap},maxSwapErrorMsg(){return this.walletModalMode==="deposit"?`Maximum swap is ${this.maxSwapInMode} ETH`:`Swap is limited to ${this.maxLimit} ETH per 24h. Please select a lower amount or try again later.`},formDisabled(){return!!(this.isProcessingTx||["NotPermitted","MaximumPendingWithdrawals"].includes(this.outcome)||this.maxSwapInMode===0)},isLoading(){return!!this.isProcessingTx},limitRemainingBn(){return new g(this.limitRemaining)||0},clientWalletBalanceBn(){return new g(this.clientWalletBalance)||0},platformBalanceBn(){return new g(this.platformBalance)||0},ignoreDisabledStyle(){return!!this.isLoadingData},presetsDisplay(){let e=this.presets.map(t=>({value:t==="MAX"?this.maxSwap:t,disabled:!1,label:t==="MAX"?"MAX":`${t}`}));return this.isLoadingData||e.forEach(t=>{let n=!1;const m=new g(t.value);this.walletModalMode==="deposit"||m.isLessThan(this.platformBalanceBn)||m.isLessThan(this.limitRemainingBn)?n=!1:n=!0,t.disabled=n}),e},valUsdDisplay(){let e=this.swapAmount*this.exchangeRateEthUsd;return`$${this.$truncateNumber(e,2)}`}},mounted(){this.focusOnField()},methods:{updateValues(e,t){this.meta=t,this.swapAmount=e.swapAmount},async onSubmit(){this.$emit("onSubmit",this.swapAmount)},usePreset(e){this.$refs.FreeFormInput.inputValue=e,this.swapAmount=e},hideCompleteBtn(){this.$emit("onComplete",!1)},focusOnField(){const e=document.getElementById("swapAmount");e&&e.focus()}},watch:{swapAmount(e){this.$emit("onSwapAmountUpdate",e)},isComplete(e){this.showCompleteBtn=e},walletModalMode(){this.$refs.FreeFormInput.inputValue=null,this.swapAmount=null,this.$refs.SwapForm.resetForm(),this.focusOnField()}}}),De={class:"relative"},xe={key:0,class:"absolute block right-2 top-[2px] bg-transparent z-10 text-slate-100 select-none py-3 pr-1"},Le={class:"flex justify-between mt-1 overflow-hidden"};function Pe(e,t,n,m,w,k){const p=te,d=se,f=x,v=X("Form");return s(),y(v,{onSubmit:e.onSubmit,"validation-schema":e.validationSchema,ref:"SwapForm",class:I(["relative transition-all mb-3",{"after:block after:w-full after:h-full after:absolute after:top-0 after:left-0":e.isLoadingData}])},{default:u(({values:M,meta:B,handleReset:N})=>[a("div",De,[r(p,{name:"swapAmount",type:"number",step:"0.01",maxDecimalPlaces:6,hideValidationTick:!0,value:e.swapAmount,disabled:e.formDisabled,currency:e.currency,errorFriendly:!0,hideErrorMessages:e.formDisabled,hideValidationCross:!0,centerAlignErrors:!0,ref:"FreeFormInput",onKeypress:t[0]||(t[0]=b=>e.$preventLetterInput(b)),onInput:b=>e.updateValues(M,B)},null,8,["value","disabled","currency","hideErrorMessages","onInput"]),e.showExchangeRate&&e.exchangeRateEthUsd?(s(),i("span",xe," ~"+o(e.valUsdDisplay),1)):l("",!0)]),a("div",Le,[(s(!0),i(W,null,q(e.presetsDisplay,(b,H)=>(s(),i("div",{key:"preset"+H},[r(d,{disabled:e.formDisabled||b.disabled,onClick:Nt=>e.usePreset(b.value),preset:b.value,presetSelected:e.swapAmount,ignoreDisabledStyle:e.ignoreDisabledStyle,class:"w-12 3xs:w-14 xs:w-[62px] text-sm xs:text-base"},{default:u(()=>[h(o(b.label),1)]),_:2},1032,["disabled","onClick","preset","presetSelected","ignoreDisabledStyle"])]))),128))]),r(A,{name:"fade-fast",mode:"out-in"},{default:u(()=>[e.showCompleteBtn?(s(),y(f,{key:0,type:"button",class:"block w-full mt-4",theme:"success",onClick:e.hideCompleteBtn},{default:u(()=>[h(" Swap complete ")]),_:1},8,["onClick"])):(s(),y(f,{key:1,isLoading:e.isLoading,type:"submit",disabled:!B.valid||e.formDisabled||e.isSubmitBtnBlocked,ignoreDisabledStyle:e.ignoreDisabledStyle,class:"block w-full mt-4"},{default:u(()=>[h(" Swap ")]),_:2},1032,["isLoading","disabled","ignoreDisabledStyle"]))]),_:2},1024)]),_:1},8,["onSubmit","validation-schema","class"])}const Ie=$(We,[["render",Pe]]),Re=""+globalThis.__publicAssetsURL("img/logos/wyre-logo-white.svg"),Ee=_({name:"ButtonWyre",props:{amount:{type:Number,default:100},currency:{type:String,default:"USD"},theme:{type:String,default:"grey"},size:{type:String,default:"md"},text:{type:String,default:""}},data(){return{loading:!1}},computed:{...c(Y,["isMobileDevice"]),...c(R,["address"])},methods:{async launchWidget(e,t){this.loading=!0;try{const n=await this.$wyre(e,t,this.address,this.isMobileDevice?window.location.href:void 0);if(this.isMobileDevice){window.location.assign(n);return}window.open(n,"")}catch(n){console.log(n)}finally{this.loading=!1}}}}),Fe=a("img",{src:Re,alt:"Wyre logo",width:"60",height:"14",class:"inline-block relative ml-2 -top-0.5"},null,-1);function Ue(e,t,n,m,w,k){const p=x;return s(),y(p,{disabled:e.loading,isLoading:e.loading,theme:e.theme,size:e.size,onClick:t[0]||(t[0]=d=>e.launchWidget(e.amount,e.currency))},{default:u(()=>[a("span",null,o(e.text),1),Fe]),_:1},8,["disabled","isLoading","theme","size"])}const Ne=$(Ee,[["render",Ue]]),He=_({name:"ModalWalletFormDeposit",components:{Form:E,Field:F,ErrorMessage:U},props:["currency","swapAmount","submitTrigger"],data(){return{isLoading:!1,txHash:null}},computed:{...T(L,["showDepositAccountModal","walletModalMode","toastNotification","toastNotificationPresets"]),...T(C,["showDepositCompleted","swapsPending"]),...c(S,["exchangeRateEthUsd"]),...c(P,["userFeatures"]),depositAmount(){return this.swapAmount||0},valUsdDisplay(){let e=this.depositAmount*this.exchangeRateEthUsd;return e<1e3?this.depositAmount!==null?this.$truncateNumber(e,2):"":this.depositAmount!==null?this.$formatNumber(e,2):""},depositAvailable(){var e;return((e=this.userFeatures)==null?void 0:e.deposit)||!1},txUrl(){return this.txHash?`${this.$config.public.TX_SCANNER_URL}${this.txHash}`:null}},mounted(){this.checkPendingDeposit()},beforeUnmount(){this.showDepositCompleted=!1,this.showDepositAccountModal=!1},methods:{...D(S,["startTransaction"]),async onSubmit(e){if(this.depositAvailable){this.isLoading=!0;try{const t=await this.startTransaction(e);this.swapsPending.unshift({txHash:t,direction:"in"}),this.txHash=t,t&&setTimeout(()=>{this.toastNotification=this.toastNotificationPresets.swapPending,this.$emit("close")},1500)}catch(t){this.isLoading=!1,t.code===4001?console.log("Deposit cancelled."):console.log(t.message)}}},usePreset(e){this.$refs.DepositInput.inputValue=e,this.depositAmount=e},checkPendingDeposit(){const e=this.swapsPending.find(t=>t.direction==="in");this.txHash=(e==null?void 0:e.txHash)||null,this.isLoading=!!this.txHash}},watch:{isLoading(e){this.$emit("onProcessing",e)},showDepositCompleted(e,t){e&&!t&&(this.isLoading=!1,this.$emit("onComplete",!0))},submitTrigger(e){this.onSubmit(e.amount)},swapsPending(){this.checkPendingDeposit()}}}),qe={class:"text-center text-sm leading-tight min-h-[16px]"},Oe={key:0,class:"text-center relative -top-1.5"},Ve=a("span",{class:"text-sm inline-block mb-1 text-slate-100 relative before:border-t before:border-slate-400 before:absolute before:top-1/2 before:w-10 before:right-full before:mx-2 after:border-t after:border-slate-400 after:absolute after:top-1/2 after:w-10 after:left-full after:mx-2"},"or",-1),ze={key:0,class:"text-center relative -top-1.5"},Ge=a("span",{class:"text-sm inline-block mb-1 text-slate-100 relative before:border-t before:border-slate-400 before:absolute before:top-1/2 before:w-10 before:right-full before:mx-2 after:border-t after:border-slate-400 after:absolute after:top-1/2 after:w-10 after:left-full after:mx-2"},"or",-1),je=a("span",null,"Use Deposit Address",-1),Xe={key:0},Ye={key:1,class:"animate-pulse flex justify-center items-center"},Ze=a("span",{class:"inline-block"},"Pending Swap",-1),Ke=["href"],Je={class:"max-w-[60px] text-ellipsis overflow-hidden inline-block"},Qe=a("span",{class:"icon-ico-link-external relative text-sm"},null,-1);function et(e,t,n,m,w,k){const p=Ne,d=x;return s(),i("div",qe,[r(A,{name:"bottom-pop"},{default:u(()=>[e.$config.public.WYRE_ACTIVE&&e.walletModalMode==="deposit"?(s(),i("div",Oe,[Ve,r(p,{theme:"grey",size:"sm",text:"Buy ETH with",class:"block w-full"})])):l("",!0)]),_:1}),r(A,{name:"bottom-pop"},{default:u(()=>[e.$config.public.DEPOSIT_ACCOUNT_ACTIVE&&e.walletModalMode==="deposit"?(s(),i("div",ze,[Ge,r(d,{disabled:e.isLoading,isLoading:e.isLoading,theme:"grey",size:"sm",class:"block w-full",onClick:t[0]||(t[0]=f=>e.showDepositAccountModal=!0)},{default:u(()=>[je]),_:1},8,["disabled","isLoading"])])):l("",!0)]),_:1}),e.depositAvailable?!e.showDepositCompleted&&(e.txHash||e.swapsPending.length>0)?(s(),i("div",Ye,[Ze,e.txUrl?(s(),i("a",{key:0,href:e.txUrl,class:"flex items-center ml-1 uppercase",target:"_blank"},[a("span",Je,o(e.txHash),1),Qe],8,Ke)):l("",!0)])):l("",!0):(s(),i("p",Xe," The country youâ€™re connecting from is restricted "))])}const tt=$(He,[["render",et]]),st=_({name:"CountdownMain",props:["time","endedText"],data(){return{countdownText:null,ended:!1}},computed:{...c(L,["secondsTicker"])},mounted(){this.setExpiresIn()},methods:{setExpiresIn(){const e=this.$dayjs(),t=this.$dayjs(this.time),n=t.diff(e,"s");if(n<=0)return this.ended||(this.ended=!0,this.$emit("ended")),this.countdownText=this.endedText||"soon";if(this.ended=!1,n>86400)return this.countdownText=`in <span class="tabular-nums">${t.fromNow()}</span>`;let m=new Date(null);m.setSeconds(n);const w=m.toISOString().substr(11,8);return this.countdownText=`in <span class="tabular-nums">${w}</span>`}},watch:{secondsTicker(){this.setExpiresIn()}}}),it=["innerHTML"];function at(e,t,n,m,w,k){return s(),i("span",{innerHTML:e.countdownText},null,8,it)}const nt=$(st,[["render",at]]),ot=_({name:"ModalWalletFormWithdraw",components:{Form:E,Field:F,ErrorMessage:U},setup(){return{websocketStore:Z()}},props:["currency","swapAmount","submitTrigger"],data(){return{ready:!1,withdrawalLoading:!1,requested:!1,error:null,availability:null,meta:null,showWithdrawalCompleted:!1,withdrawalProcessingId:null,withdrawalProcessing:!1,pendingWithdrawal:null,notPermitted:!1,requestAmount:void 0,feeInitialValue:.005,txHash:null}},computed:{...c(S,["exchangeRateEthUsd"]),...c(P,["userData","userFeatures"]),...c(R,["address","isUserLogged"]),...T(C,["swapsPending"]),...T(L,["showInfoModal","infoModalType","infoModalContent"]),availableAmount(){var e;return(e=this.availability)!=null&&e.availableAmount?new g(this.availability.availableAmount):0},availableAmountAfterWithdrawal(){var e;return this.requestAmount?new g(this.availability.availableAmount).minus(this.requestAmount):(e=this.availability)==null?void 0:e.availableAmount},netAmount(){var e;return(e=this.availability)!=null&&e.netAmount?new g(this.availability.netAmount):0},hasFee(){var e,t;return!!((e=this.availability)!=null&&e.fee)&&((t=this.availability.fee)==null?void 0:t.amount)>0},percentageFee(){var e;return((e=this.availability)==null?void 0:e.fee)&&this.availability.fee.configuration.type==="Percentage"},flatFee(){var e;return((e=this.availability)==null?void 0:e.fee)&&this.availability.fee.configuration.type==="Flat"},withdrawalFeeAmount(){var e;return(e=this.availability)!=null&&e.fee?new g(this.availability.fee.amount):0},minWithdrawableAmount(){var e,t;return(e=this.availability)!=null&&e.minimumAmount?(t=this.availability)==null?void 0:t.minimumAmount:null},defaultAmounts(){return this.availability.defaultAmounts?this.availability.defaultAmounts:[]},holdTime(){const e=this.availability.availableInDays;if(e)return e<=2?`${e*24} hours`:`${e} days`},requireConfirm(){var e;return(e=this.availability)!=null&&e.requireConfirm?this.availability.requireConfirm:null},withdrawalLimit(){var e,t;return(e=this.availability)!=null&&e.limit?(t=this.availability)==null?void 0:t.limit:null},withdrawalLimitRemaining(){var e,t;return(e=this.availability)!=null&&e.limitRemaining?(t=this.availability)==null?void 0:t.limitRemaining:null},withdrawalLimitTime(){const e=this.availability.limitPeriodInHours;if(e)return`${e} hour period`},hasRemainingWithdrawalLimit(){var e,t;return(e=this.availability)!=null&&e.limitRemaining?!new g((t=this.availability)==null?void 0:t.limitRemaining).isZero():!1},valUsdDisplay(){let e=this.requestAmount*this.exchangeRateEthUsd;return e<1e3?this.requestAmount!==null?this.$truncateNumber(e,2):"":this.requestAmount!==null?this.$formatNumber(e,2):""},txUrl(){return this.txHash?`${this.$config.public.TX_SCANNER_URL}${this.txHash}`:null}},mounted(){this.init(),this.websocketStore.$onAction(({name:e,args:t})=>{e==="handleMessage"&&t[0].type==="Withdrawal:StatusChange"&&K({name:e,args:t},this.withdrawalUpdate,"Withdrawal:StatusChange")})},methods:{...D(C,["getWithdrawals","requestWithdrawal","cancelWithdrawal","confirmWithdrawal","withdrawalAvailability"]),...D(P,["getUserData"]),async init(){var e;if(this.$emit("onLoadingData",!0),!((e=this.userFeatures)!=null&&e.withdraw)){this.notPermitted=!0,this.ready=!0;return}await Promise.all([this.loadWithdrawalAvailability(),this.loadPendingWithdrawals()]),this.ready=!0,this.setRequestValue(this.swapAmount),this.$emit("onLoadingData",!1),this.checkPendingWithdrawal()},async loadWithdrawalAvailability(){this.error=null,this.withdrawalLoading=!0,this.$emit("onBlockSubmitBtn",!0);try{const e=await this.withdrawalAvailability(this.currency,this.requestAmount?this.requestAmount.toString():void 0);this.availability=e,this.$emit("onWithdrawalAvailabilityChange",e)}catch(e){this.error=e.message}finally{this.$emit("onBlockSubmitBtn",!1)}this.withdrawalLoading=!1},async loadPendingWithdrawals(){var e,t;try{const n=await this.$api("/withdrawal",{method:"GET",params:{page:1,pageSize:1,pending:!0}});(e=n==null?void 0:n.items)!=null&&e.length&&(this.pendingWithdrawal=n.items[0],this.txHash=(t=n.items[0])==null?void 0:t.providerRef,this.withdrawalProcessing=!0)}catch(n){console.log(n)}},async debounceCheckWithdrawalAvailability(){clearTimeout(this.debounce),this.debounce=setTimeout(async()=>{await this.loadWithdrawalAvailability()},800)},async setRequestValue(e){let t=new g(e);this.requestAmount=t,this.requestAmount.toString()},async resetRequestValue(){this.requestAmount=void 0,await this.loadWithdrawalAvailability()},async onSubmit(e){this.error=null;try{this.withdrawalProcessing=!0,await this.requestWithdrawal(this.currency,e?e.toString():void 0),this.requested=!0}catch(t){t.message!=="Withdrawal unavailable."&&(this.error=t.message),this.withdrawalProcessing=!1}},async withdrawalUpdate(e){e.status==="Approved"?this.$emit("close"):["Cancelled","Declined","Error","InsufficientFunds"].includes(e.status)?(this.withdrawalProcessing=!1,this.$emit("onProcessing",!1)):e.status==="Complete"&&(this.withdrawalProcessing=!1,this.showWithdrawalCompleted=!0,this.$emit("onProcessing",!1),this.$emit("onComplete",!0),await this.loadWithdrawalAvailability()),this.txHash=e==null?void 0:e.providerRef,this.requested=!1},checkPendingWithdrawal(){const e=this.swapsPending.find(t=>t.direction==="out");this.withdrawalProcessing=!!e}},watch:{withdrawalProcessing(e){this.$emit("onProcessing",e)},submitTrigger(e){this.onSubmit(e.amount)},swapAmount(e){this.setRequestValue(e)},swapsPending(){this.checkPendingWithdrawal()}}}),lt={class:"min-h-[16px]"},rt={key:0,class:"text-center text-sm leading-tight text-slate-100"},ut={class:"text-xs uppercase"},dt={key:1,class:"text-center text-sm leading-tight text-slate-100"},mt={key:0,class:"text-xs uppercase"},ct={key:0},ht={key:1},pt={key:2},ft={key:1},gt={key:2,class:"animate-pulse flex justify-center items-center text-white"},wt=a("span",{class:"inline-block"},"Pending Swap",-1),bt=["href"],yt={class:"max-w-[60px] text-ellipsis overflow-hidden inline-block"},$t=a("span",{class:"icon-ico-link-external relative text-sm"},null,-1),_t={key:3},kt=a("a",{class:"text-gray-300 hover:text-white",href:"mailto:support@metawin.com"},"support@metawin.com",-1),vt={key:4},Mt={key:5,class:"text-red"};function St(e,t,n,m,w,k){var d,f,v,M;const p=nt;return s(),i("div",lt,[e.ready?l("",!0):(s(),i("div",rt,[a("p",ut,o(e.feeInitialValue)+" "+o(e.currency)+" Gas Fee applies. ",1)])),e.ready?(s(),i("div",dt,[e.pendingWithdrawal?l("",!0):(s(),i("div",mt,[e.hasFee&&e.availability.outcome==="Available"&&e.requestAmount>0?(s(),i("p",ct,o(e.withdrawalFeeAmount)+" "+o(e.currency)+" Gas Fee applies. ",1)):e.flatFee?(s(),i("p",ht,o(e.availability.fee.configuration.amount)+" "+o(e.currency)+" Gas Fee applies. ",1)):e.percentageFee?(s(),i("p",pt," Gas Fee of "+o(e.availability.fee.configuration.amount)+"% "+o(e.currency)+" up to "+o(e.availability.fee.configuration.maxAmount)+" "+o(e.currency)+" applies. ",1)):l("",!0)])),((d=e.availability)==null?void 0:d.outcome)==="WithdrawalLimitReached"&&!e.hasRemainingWithdrawalLimit?(s(),i("p",ft,[h(" You have already swapped the maximum amount allowed for a "+o(e.withdrawalLimitTime)+". You can swap another "+o((f=e.availability)==null?void 0:f.limitRemainingAfterExpiry)+" "+o(e.currency)+" ",1),r(p,{time:(v=e.availability)==null?void 0:v.limitExpiryTime,onEnded:t[0]||(t[0]=B=>e.loadWithdrawalAvailability())},null,8,["time"])])):l("",!0),e.pendingWithdrawal&&!e.showWithdrawalCompleted||((M=e.availability)==null?void 0:M.outcome)==="MaximumPendingWithdrawals"?(s(),i("div",gt,[wt,e.txUrl?(s(),i("a",{key:0,href:e.txUrl,class:"flex items-center ml-1 uppercase",target:"_blank"},[a("span",yt,o(e.txHash),1),$t],8,bt)):l("",!0)])):l("",!0),e.notPermitted||e.availability.outcome==="NotPermitted"?(s(),i("p",_t,[h(" Unfortunately you are unable to swap at this time, please contact "),kt,h(" for further information. ")])):l("",!0),e.requested&&e.requireConfirm?(s(),i("p",vt," Check your email to confirm your swap request. ")):l("",!0),e.error?(s(),i("p",Mt,o(e.error),1)):l("",!0)])):l("",!0)])}const Bt=$(ot,[["render",St]]),At=_({name:"ModalWalletMain",data(){return{poller:null,currency:"ETH",isProcessingTx:!1,isLoadingData:!1,isSubmitBtnBlocked:!1,isComplete:!1,minSwapDefault:.005,maxSwapDefault:3,formInterface:{currency:"ETH",presets:[.05,.1,.5,1,"MAX"],minSwap:.005,maxSwap:5,showExchangeRate:!1,limitRemaining:null,outcome:null},swapAmount:.1,submitTrigger:{amount:0,trigger:0}}},computed:{...T(L,["showWalletModal","walletModalMode","showDepositAccountModal"]),...c(R,["wallet","isUserLogged"]),...c(S,["balance"]),...c(C,["balances","swapsPending"]),...c(C,{allBalances:"wallet"}),clientWalletName(){var e;return(e=this.wallet)==null?void 0:e.name},clientWalletBalance(){return this.$truncateNumber(this.balance,7)},platformBalance(){var e;return(e=this.allBalances)!=null&&e.withdrawable&&this.allBalances.withdrawable[this.currency]||0},buttons(){let e=[{owner:"client",walletName:this.clientWalletName,balance:this.clientWalletBalance,currency:this.currency},{owner:"platform",walletName:"MetaWin",balance:this.platformBalance,currency:this.currency}];return this.walletModalMode==="withdraw"&&(e=e.reverse()),e},isToggleBlocked(){return!!(this.swapsPending.length>0||this.isProcessingTx)}},mounted(){this.init()},beforeUnmount(){this.poller&&clearInterval(this.poller)},methods:{...D(S,["walletGet"]),async init(){var e,t;await((e=this.wallet)==null?void 0:e.checkChain()),this.walletGet(),((t=this.swapsPending[0])==null?void 0:t.direction)==="out"&&this.toggle(),this.setFormInterface(),this.poller=setInterval(()=>{this.walletGet()},5e3)},close(){this.showWalletModal=!1,this.walletModalMode="deposit"},toggle(){this.walletModalMode=this.walletModalMode==="deposit"?"withdraw":"deposit",this.setFormInterface(),this.isComplete=!1,this.isProcessingTx=!1,this.isLoadingData=!1,this.isSubmitBtnBlocked=!1},processingTx(e){this.isProcessingTx=e},swapAmountUpdate(e){this.swapAmount=e},submitSwapAmount(e){const t=this.submitTrigger+1;this.submitTrigger={amount:e,trigger:t}},loadingData(e){this.isLoadingData=e},withdrawalAvailabilityChange(e){this.setFormInterface(e)},blockSubmitBtn(e){this.isSubmitBtnBlocked=e},complete(e){this.walletGet(),this.isComplete=e},setFormInterface(e){this.walletModalMode==="deposit"?this.formInterface={...this.formInterface,maxSwap:this.$truncateNumber(this.clientWalletBalance*.95,8),limitRemaining:null,outcome:null}:this.formInterface={...this.formInterface,maxSwap:Math.min(e==null?void 0:e.limitRemaining,this.platformBalance),minSwap:(e==null?void 0:e.minimumAmount)||this.minSwapDefault,limitRemaining:e==null?void 0:e.limitRemaining,maxLimit:e==null?void 0:e.limit,outcome:e==null?void 0:e.outcome}}},watch:{isUserLogged(e){e||this.close()}}}),Tt={class:"px-4 md:px-7 w-full pt-4"},Ct={class:"animate-fade-in text-center mb-5 px-2"},Wt=a("h2",{class:"font-bold text-sm lg:text-base mb-2 leading-tight mx-auto"},"Welcome to your MetaWin Wallet",-1),Dt={key:0,class:"text-slate-100 text-xs lg:text-sm"},xt={key:1,class:"text-center border-b border-b-slate-400 pb-4"},Lt=a("br",null,null,-1),Pt={key:0,class:"text-center"},It=a("span",{class:"text-sm inline-block mb-3 mt-3 text-slate-100 relative before:border-t before:border-slate-400 before:absolute before:top-1/2 before:w-10 before:right-full before:mx-2 after:border-t after:border-slate-400 after:absolute after:top-1/2 after:w-10 after:left-full after:mx-2"},"or",-1),Rt={class:"content-center"},Et=a("span",null,"Use Deposit Address",-1),Ft={class:"text-center mt-2"};function Ut(e,t,n,m,w,k){const p=Ce,d=Ie,f=tt,v=Bt,M=ie,B=x,N=ae,b=J;return s(),y(b,{onClose:e.close,transitionName:"modal-slide-up"},{default:u(()=>[a("div",Tt,[a("header",Ct,[Wt,e.wallet?(s(),i("p",Dt," Here you can move ETH between your Web3 and MetaWin wallet instantly. Your MetaWin balance can be used to play instant win games. ")):l("",!0)]),e.wallet?(s(),i(W,{key:0},[r(p,{buttons:e.buttons,toggleBlocked:e.isToggleBlocked,walletModalMode:e.walletModalMode,maxLimit:e.formInterface.maxLimit,limitRemaining:e.formInterface.limitRemaining,onToggle:e.toggle,class:"mb-5"},null,8,["buttons","toggleBlocked","walletModalMode","maxLimit","limitRemaining","onToggle"]),r(d,O(e.formInterface,{walletModalMode:e.walletModalMode,isProcessingTx:e.isToggleBlocked,isLoadingData:e.isLoadingData,isSubmitBtnBlocked:e.isSubmitBtnBlocked,isComplete:e.isComplete,clientWalletBalance:e.clientWalletBalance,platformBalance:e.platformBalance,showExchangeRate:!0,onOnSubmit:e.submitSwapAmount,onOnSwapAmountUpdate:e.swapAmountUpdate,onOnComplete:e.complete}),null,16,["walletModalMode","isProcessingTx","isLoadingData","isSubmitBtnBlocked","isComplete","clientWalletBalance","platformBalance","onOnSubmit","onOnSwapAmountUpdate","onOnComplete"]),r(A,{name:"fade-fast",mode:"out-in"},{default:u(()=>[e.walletModalMode==="deposit"?(s(),y(f,{key:0,currency:e.currency,swapAmount:e.swapAmount,submitTrigger:e.submitTrigger,onClose:e.close,onOnProcessing:e.processingTx,onOnComplete:e.complete},null,8,["currency","swapAmount","submitTrigger","onClose","onOnProcessing","onOnComplete"])):(s(),y(v,{key:1,currency:e.currency,swapAmount:e.swapAmount,submitTrigger:e.submitTrigger,onClose:e.close,onOnLoadingData:e.loadingData,onOnProcessing:e.processingTx,onOnWithdrawalAvailabilityChange:e.withdrawalAvailabilityChange,onOnBlockSubmitBtn:e.blockSubmitBtn,onOnComplete:e.complete},null,8,["currency","swapAmount","submitTrigger","onClose","onOnLoadingData","onOnProcessing","onOnWithdrawalAvailabilityChange","onOnBlockSubmitBtn","onOnComplete"]))]),_:1})],64)):(s(),i("div",xt,[h(" To swap funds you need to connect your Web3 wallet. "),Lt,r(M,{size:"sm",class:"mt-4",web3Only:!0}),r(A,{name:"bottom-pop"},{default:u(()=>[e.$config.public.DEPOSIT_ACCOUNT_ACTIVE&&e.walletModalMode==="deposit"?(s(),i("div",Pt,[It,a("div",Rt,[r(B,{disabled:e.isLoadingData,isLoading:e.isLoadingData,theme:"grey",size:"sm",onClick:t[0]||(t[0]=H=>e.showDepositAccountModal=!0)},{default:u(()=>[Et]),_:1},8,["disabled","isLoading"])])])):l("",!0)]),_:1})])),a("footer",Ft,[r(N,{theme:"loadmore",size:"sm",to:"/wallet",onClick:e.close},{default:u(()=>[h(" Transaction History ")]),_:1},8,["onClick"])])])]),_:1},8,["onClose"])}const Zt=$(At,[["render",Ut]]);export{Zt as default};
//# sourceMappingURL=Main.df20a6d2.js.map
