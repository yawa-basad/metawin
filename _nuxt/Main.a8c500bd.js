import{_}from"./SpinnerSmall.7bb932c6.js";import{f as g,W as v,X as w,Y as x,Z as A,_ as C,m as M,u as S,k,q as D,$ as T,R as N,r as U,o,g as h,w as l,d as s,t as E,a as u,T as m,h as p,c as y,N as R,O as L,x as O}from"./entry.4421f2c3.js";import{u as f}from"./depositAccount.f0f8723e.js";import{b as $}from"./browser.e933942f.js";const j=["low","medium","quartile","high","L","M","Q","H"],q=[0,1,2,3,4,5,6,7],W=["alphanumeric","numeric","kanji","byte"],F=["image/png","image/jpeg","image/webp"],I=40,V=g({props:{version:{type:Number,validator:e=>e===Number.parseInt(String(e),10)&&e>=1&&e<=I},errorCorrectionLevel:{type:String,validator:e=>j.includes(e)},maskPattern:{type:Number,validator:e=>q.includes(e)},toSJISFunc:Function,margin:Number,scale:Number,width:Number,color:{type:Object,validator:e=>["dark","light"].every(t=>["string","undefined"].includes(typeof e[t])),required:!0},type:{type:String,validator:e=>F.includes(e),required:!0},quality:{type:Number,validator:e=>e===Number.parseFloat(String(e))&&e>=0&&e<=1,required:!1},value:{type:[String,Array],required:!0,validator(e){return typeof e=="string"?!0:e.every(t=>typeof t.data=="string"&&"mode"in t&&W.includes(t.mode))}}},setup(e,{attrs:t,emit:r}){const n=v();return w(e,()=>{const{quality:i,value:d}=e,c=A(e,["quality","value"]);$.toDataURL(d,Object.assign(c,i==null||{renderOptions:{quality:i}})).then(a=>{n.value=a,r("change",a)}).catch(a=>r("error",a))},{immediate:!0}),()=>x("img",Object.assign(Object.assign({},t),{src:n.value}))}}),H=g({name:"ModalDepositAccountMain",props:["currencyCode"],data(){return{ready:!1,loading:!1,currencyCode:"ETH",errorMessage:null,copyAddressText:null,address:null,dataUrl:null}},components:{VueQrcode:V},computed:{...M(S,["showDepositAccountModal"]),...k(f,["accounts"])},async mounted(){await this.getOrAdd()},beforeUnmount(){this.showDepositAccountModal=!1},methods:{...D(f,["init","add"]),async getOrAdd(){var t;await this.init();let e=(t=this.accounts)==null?void 0:t.find(r=>r.currencyCode===this.currencyCode);if(e||(e=await this.addAccount(this.currencyCode)),!e){this.ready=!0;return}this.address=e.address,this.setDataUrl(),this.ready=!0},async addAccount(e){this.loading=!0;try{return await this.add(e)}catch(t){switch(t.message){case"DepositAccountAlreadyExists":this.errorMessage="A deposit wallet for the selected currency already exists.";break;case"DepositAccountCreationFailed":this.errorMessage="We have been unable to create your deposit wallet.";break;default:this.errorMessage="An unexpected error occurred.";break}}finally{this.loading=!1}},setDataUrl(){switch(this.currencyCode){default:const e=T.utils.hexToNumber(N("ETHEREUM_NETWORK_ID"));this.dataUrl=`ethereum:${this.address}?chainId=${e}`,console.log("Deposit account QR data URL:",this.dataUrl);break}},async copyAddress(){this.$copyText(this.address,void 0,e=>{e?(this.copyAddressText="Copy Failed",console.log("Failed to copy: ",e)):(this.copyAddressText="Copied!",setTimeout(()=>{this.copyAddressText=null},2e3))})},onClose(){this.showDepositAccountModal=!1}}}),B={class:"px-4 md:px-7 w-full pt-4 pb-3"},Q={class:"animate-fade-in text-center mb-6 px-2"},P={class:"text-3xl tracking-widest mt-6 mb-5 text-center"},K=s("p",{class:"text-slate-100 text-md lg:text-md"}," Use your deposit address to fund your MetaWin account balance without connecting to the site. ",-1),X={key:0},Y={key:0,class:"flex items-center justify-center mb-7"},z=["value"],J=s("span",{class:"absolute block right-2 top-[2px] bg-slate-600 z-10 text-slate-100 select-none py-2 cursor-pointer"},[s("span",{title:"Copy Address",class:"text-xl icon-ico-copy flex justify-center items-center w-8 h-8 text-white"})],-1),Z={class:"w-full inline-block text-red text-md mt-4 text-center"},G=["innerHTML"];function ee(e,t,r,n,b,i){const d=_,c=U("vue-qrcode"),a=O;return o(),h(a,{onClose:e.onClose,transitionName:"modal-slide-up"},{default:l(()=>[s("div",B,[s("header",Q,[s("h1",P,E(e.currencyCode)+" Deposit Wallet",1),K]),u(m,{name:"fade-fast"},{default:l(()=>[e.ready?p("",!0):(o(),h(d,{key:0,class:"w-full !py-0"}))]),_:1}),u(m,{name:"fade-fast"},{default:l(()=>[e.ready?(o(),y("div",X,[e.address&&e.dataUrl?(o(),y("div",Y,[u(c,{value:e.dataUrl,class:"rounded-lg"},null,8,["value"])])):p("",!0),s("div",{class:"relative",onClick:t[0]||(t[0]=te=>e.copyAddress())},[s("input",{class:"block relative w-full bg-slate-600 border-slate-600 rounded-lg py-3 px-4 border-2 outline-none focus:border-slate-200 focus:ring-0 autofill:bg-slate-600 transition-all appearance-none overflow-hidden pr-10 whitespace-nowrap truncate cursor-pointer hover:appearance-none hover:text-white disabled:text-white",name:"referralLink",type:"text",placeholder:"Unavalable",disabled:"",value:e.copyAddressText??e.address},null,8,z),J]),R(s("h2",Z,[s("span",{innerHTML:e.errorMessage},null,8,G)],512),[[L,e.errorMessage]])])):p("",!0)]),_:1})])]),_:1},8,["onClose"])}const ne=C(H,[["render",ee]]);export{ne as default};
//# sourceMappingURL=Main.a8c500bd.js.map
